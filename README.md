# DevOps Demo Website

–ü—Ä–æ—Å—Ç–æ–π –ø—Ä–∏–º–µ—Ä —Ç–æ–≥–æ, –∫–∞–∫ Git —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –∏—Å—Ç–æ—á–Ω–∏–∫–æ–º –ø—Ä–∞–≤–¥—ã –¥–ª—è –≤—Å–µ–π —Å–∏—Å—Ç–µ–º—ã.

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
demo-website/
‚îú‚îÄ‚îÄ .github/workflows/
‚îÇ   ‚îî‚îÄ‚îÄ pipeline.yml # GitHub Actions CI/CD pipeline
‚îú‚îÄ‚îÄ ansible/         # Configuration Management
‚îÇ   ‚îú‚îÄ‚îÄ ansible.cfg  # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Ansible
‚îÇ   ‚îú‚îÄ‚îÄ inventory.yml# –°–ø–∏—Å–æ–∫ —Å–µ—Ä–≤–µ—Ä–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ setup.yml    # Playbook –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ Docker
‚îÇ   ‚îî‚îÄ‚îÄ deploy.yml   # Playbook –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
‚îú‚îÄ‚îÄ Dockerfile       # Docker –æ–±—Ä–∞–∑ –¥–ª—è nginx –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
‚îú‚îÄ‚îÄ .dockerignore    # –ò–≥–Ω–æ—Ä–∏—Ä—É–µ–º—ã–µ —Ñ–∞–π–ª—ã –ø—Ä–∏ —Å–±–æ—Ä–∫–µ –æ–±—Ä–∞–∑–∞
‚îú‚îÄ‚îÄ index.html      # –û—Å–Ω–æ–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å–∞–π—Ç–∞ —Å —Ä–∞–∫–µ—Ç–∫–æ–π üöÄ
‚îú‚îÄ‚îÄ nginx.conf      # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è nginx –¥–ª—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
‚îú‚îÄ‚îÄ test.sh         # –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–∫–µ—Ç–∫–∏ –Ω–∞ —Å–∞–π—Ç–µ
‚îú‚îÄ‚îÄ install-frp.sh # –°–∫—Ä–∏–ø—Ç —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ frp
‚îî‚îÄ‚îÄ README.md       # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞
```

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Å–µ—Ä–≤–µ—Ä—É

–î–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –¥–µ–ø–ª–æ—è —Å–µ—Ä–≤–µ—Ä –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–∞—Å—Ç—Ä–æ–µ–Ω:

- **SSH –¥–æ—Å—Ç—É–ø –ø–æ –∫–ª—é—á—É** - –ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á –≤ `~/.ssh/authorized_keys`
- **Sudo –±–µ–∑ –ø–∞—Ä–æ–ª—è** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤ –≥—Ä—É–ø–ø–µ sudo —Å `NOPASSWD`
- **Python 3** - –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è Ansible playbooks  
- **Docker** - –±—É–¥–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ Ansible

## –ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫

1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:
   ```bash
   git clone https://github.com/prafdin/devops-demo-website.git
   cd devops-demo-website
   ```

2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ frp: (—Ç–æ–∫–µ–Ω –º–æ–∂–µ—Ç –∏–∑–º–µ–Ω–∏—Ç—å—Å—è!)
   ```bash
   sudo ./install-frp.sh course.prafdin.ru mytoken prafdin
   ```

3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Å–µ—Ä–≤–µ—Ä –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –¥–µ–ø–ª–æ—è:
   ```bash
   # –°–æ–∑–¥–∞–Ω–∏–µ –ø–∞—Ä—ã –∫–ª—é—á–µ–π –¥–ª—è ssh –¥–æ—Å—Ç—É–ø–∞ –∫ –í–ú
   ssh-keygen -t rsa
   cat ~/.ssh/id_rsa.pub >> ~/.ssh/authorized_keys
      
   # –ù–∞—Å—Ç—Ä–æ–π—Ç–µ sudo –±–µ–∑ –ø–∞—Ä–æ–ª—è –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   echo "user ALL=(ALL) NOPASSWD: ALL" | sudo tee /etc/sudoers.d/user
   ```

4. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ GitHub Actions –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏ —Å–µ–∫—Ä–µ—Ç—ã:
   - Variables: DEPLOY_HOST, DEPLOY_USER, DEPLOY_PORT
   - Secrets: SSH_PRIVATE_KEY

5. –°–∞–π—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É http://app.prafdin.course.prafdin.ru/